<?php

namespace Backpack\Reviews\app\Models\Admin;

use Backpack\Reviews\app\Models\Review as BaseReview;

class Review extends BaseReview
{   
    /*
    |--------------------------------------------------------------------------
    | GLOBAL VARIABLES
    |--------------------------------------------------------------------------
    */
	
    /*
    |--------------------------------------------------------------------------
    | FUNCTIONS
    |--------------------------------------------------------------------------
    */

    /*
    |--------------------------------------------------------------------------
    | RELATIONS
    |--------------------------------------------------------------------------
    */
    

    /*
    |--------------------------------------------------------------------------
    | SCOPES
    |--------------------------------------------------------------------------
    */

    /*
    |--------------------------------------------------------------------------
    | ACCESSORS
    |--------------------------------------------------------------------------
    */   
    public function getOwnerAttribute() {
      return [$this->extras['owner']];
    }

    /*
    |--------------------------------------------------------------------------
    | MUTATORS
    |--------------------------------------------------------------------------
    */

    public function setExtrasAttribute($value) {
      $extras = $value;
      $owner_array = json_decode($value['owner'], true);

      $extras['owner'] = !empty($owner_array)? $owner_array[0]: null;
      
      $this->attributes['extras'] = json_encode($extras);
    }

}
